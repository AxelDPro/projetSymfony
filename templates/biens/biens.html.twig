{% extends 'base.html.twig' %}

{% block title %}Hello BienController{% endblock %}

{% block body %}
<div class="container" id="biens">
    <h1 class="mt-5 mb-4 text-center">Nos biens</h1>
    <div class="row">
    {% for bien in biens %}
    <div class="col-md-4">
        <div class="card mb-4">
            <img class="card-img-top" src="{{ asset('images/biens/' ~ bien.image) }}" alt="Image du bien">
            <div class="card-body">
                <h3 class="card-title text-center">{{ bien.titre }}</h3>
                <p class="card-text text-center fs-5">
                    <i class="fa-sharp fa-solid fa-city"></i> Ville : {{ bien.ville }} ({{ bien.cp }})<br>
                    <i class="fa-regular fa-square"></i> Surface : {{ bien.surface }} m²<br>
                    <i class="fa-solid fa-people-roof"></i> Nombre de pièces : {{ bien.nbPieces }}<br>
                    <b> Prix : {{ bien.prix }} € </b>
                </p>
                <div class="d-grid">
                    <button class="details-btn btn btn-primary btn-lg" data-titre="{{ bien.titre }}" data-description="{{ bien.description }}" data-surface="{{ bien.surface }}" data-prix="{{ bien.prix }}" data-nb-pieces="{{ bien.nbPieces }}" data-nb-chambre="{{ bien.nbChambre }}" data-etage="{{ bien.etage }}" data-ville="{{ bien.ville }}" data-adresse="{{ bien.adresse }}" data-type="{{ bien.type }}" data-cp="{{ bien.cp }}">Détails</button>
                </div>
            </div>
        </div>
    </div>
    {% endfor %}
</div>
    <script>
        document.addEventListener('DOMContentLoaded', function () {
            const buttons = document.querySelectorAll('.details-btn');

            buttons.forEach(button => {
                button.addEventListener('click', function () {
                    const titre = this.getAttribute('data-titre');
                    const description = this.getAttribute('data-description');
                    const surface = this.getAttribute('data-surface');
                    const prix = this.getAttribute('data-prix');
                    const nbPieces = this.getAttribute('data-nb-pieces');
                    const nbChambre = this.getAttribute('data-nb-chambre');
                    const etage = this.getAttribute('data-etage');
                    const ville = this.getAttribute('data-ville');
                    const adresse = this.getAttribute('data-adresse');
                    const type = this.getAttribute('data-type');
                    const cp = this.getAttribute('data-cp');

                    // Construction du texte pour l'alerte
                    const alertText = `
                        Titre: ${titre}\n
                        Description: ${description}\n
                        Surface: ${surface} m²\n
                        Prix: ${prix} €\n
                        Nombre de pièces: ${nbPieces}\n
                        Nombre de chambres: ${nbChambre}\n
                        Étage: ${etage}\n
                        Ville: ${ville} (${cp})\n
                        Adresse: ${adresse}\n
                        Type: ${type}
                    `;

                    // Affichage des informations dans une alerte
                    alert(alertText);
                    
                });
            });
        });
    </script>

</div>
</div>
{% endblock %}
